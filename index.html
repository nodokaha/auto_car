<!DOCTYPE html>
<html>
  <head>
    <title>カメラ映像の配信</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
<h1>Hello, world!</h1>
<h2> This is Auto Car Remote Control Site!!</h2>
    <div class="container">
      <h2>This is Auto Car Remote Control Site!!</h2>
      <form method="POST" action="/cgi-bin/hello.py">
        <div class="mb-3 input-group">
          <label for="speed-range" class="form-label">Speed</label>
          <input
            type="range"
            class="form-range"
            min="500"
            max="1023"
            step="1"
            value="900"
            name="speed"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="set"
            name="mortor"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="stop"
            name="mortor"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="roll"
            name="mortor"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="turn_right"
            name="mortor"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="turn_left"
            name="mortor"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="back_roll"
            name="mortor"
          />
          <input
            type="submit"
            class="btn btn-outline-secondary"
            value="brake"
            name="mortor"
          />
        </div>
      </form>
	<video id="video" width="640" height="480" controls />
    </div>
<script src="./hls.min.js"></script>
<script>
  var video = document.getElementById('video');
  var videoSrc = './stream/out.m3u8';
  if (Hls.isSupported()) {
    var hls = new Hls();
    hls.loadSource(videoSrc);
    hls.attachMedia(video);
  }
  // HLS.js is not supported on platforms that do not have Media Source
  // Extensions (MSE) enabled.
  //
  // When the browser has built-in HLS support (check using `canPlayType`),
  // we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video
  // element through the `src` property. This is using the built-in support
  // of the plain video element, without using HLS.js.
  else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src = videoSrc;
  }
</script>
  </body>
</html>
